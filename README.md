# 호텔 리뷰 분석을 통한 고객맞춤형 운영방안 제
## 진행기간 
- 2022.07.21. ~ 2022.08.04.

## 개요
- **호텔을 선정할 때의 “트렌드” 는 무엇이며, 고객의 “니즈” 와 호텔별 “강점”은 무엇일까?**

## How
1. 숙박 예약 사이트 크롤링을 통한 호텔 사용자 리뷰 수집
2. 형태소 빈도수 분석을 통해 키워드 데이터베이스화
3. 키워드를 통한 호텔별 강점과 보완점 분석

## Process
1. 데이터 수집
- 국내 대형 사이트 (야놀자, 여기어때, 데일리 호텔)의 리뷰데이터 크롤링

제주 전체 호텔 중 평점 8.0 이상 & 별점  4개 이상인 리뷰 데이터

 Features | 호텔이름 (name) | 리뷰(review) | 주소(addr) | 사이트(site) |
 :-------:|:-----------:|:-------:|:-----------:|:-------:|
 
 Labels | 위치 | 시설 | 서비스 | 청결 | 가격 |
 :-------:|:-----------:|:-------:|:-----------:|:-------:|:-----------:|
 
2. 데이터 전처리
- 토큰화 / 품사 추출 / 중요한 한 글자 키워드만 남기고 한 글자 단어 삭제 / 불용어제거

        ○ 전처리 함수 설정
        def text_cleaning(text):
            # 정규 표현식 처리
            hangul = re.compile('[^ ㄱ-ㅣ 가-힣]')  
            result = hangul.sub('', text)
            # okt 객체를 활용해서 형태소 토큰화 + 품사 태깅
            pos = okt.pos(result, stem = True)
            # 명사, 동사, 형용사 추출
            pos = [s for s, t in pos if t in ['Noun', 'Adjective', 'Verb']]
            # 한글자 키워드 제거
            pos = [x for x in pos if x in ['방', '뷰', '앞', '옆', '값', '룸', '싼', '안'] or len(x) > 1]
            # 불용어 제거
            pos = [x for x in pos if x not in stopwords]
            preprocessed = ' '.join(pos)
            return preprocessed
        
- 리뷰 데이터 내 빈도수 상위권 키워드 확인

![스크린샷_20221210_034500](https://user-images.githubusercontent.com/113493695/206837563-e42121f6-4a27-4ef5-b007-cc6c16c5822e.png)

- 빈도수를 기반으로 라벨 안에 들어갈 키워드 선정

      위치 = ['위치', '바다', '바닷가', '렌트', '렌터', '렌트카', '렌터카', '식당', '카페', '편의점', '근처', '근접', '접근성', '맛집', '먹거리', '음식점', '시장', '시내', '도보', '교통', '버스', '택시','주변', '음식', '해수욕장', '공항', '시내', '시장', '가깝다','앞','옆','근처','근접하다','관광지']
      시설 = ['뷰','전망','조경','야경','경치','전경','풍경', '시설','부대','온천','루프','바베큐','헬스','세탁기','스파','냉장고','어메니티','피트니스', '온돌','마사지','사우나','라운지','캠핑','수영장','인피니티','테라스','주차장','주차공간', '컨디션','가구','욕조','이불','수압','침대','침구','온수','난방', '분위기','인테리어']
      서비스 = ['조식', '아침', '식사', '뷔페', '직원', '발렛', '보관', '정비', '룸서비스', '샌딩서비스', '청소', '프론트', '프런트', '로비', '리셉션', '다리미', '업그레이드' , '대여', '친절하다', '맛있다', '섬세하다', '안내', '친절', '업글', '응대']
      청결 = ['깨끗하다', '청결도', '소독', '청소','깔끔하다', '쾌적하다', '청결하다', '화장실', '깨끗' ,'청결' , '위생', '카페트', '카펫']
      가격 = ['가성', '가격', '대비', '값', '합리', '경제적', '비싸지않다', '저렴하다', '저렴', '싼', '싸다', '합리적']
      부정 = ['작다','부실하다','소음','층간소음','좁다','비좁다','비좁은','더럽다','실망','냄새','아쉬움','늦어지다','늦다','멀다','문제','번거롭다','찝찝하다','유료','딱딱하다','어수선하다','미끄럽다','부족하다','없이','시끄럽다', '불가','담배','곰팡이','불량하다','박하다','힘들다','춥다','덥다','심하다','오래되다', '이상하다', '잘못','짧다','담배','다소','어렵다','최악','불친절하다','무겁다','나쁘다','단점','막히다', '비싸다','작고','불편', '불편하다','어둡다','낡다','협소', '약하다','냄새', '머리카락', '물때','먼지', '건조하다','아쉽다','답답하다','별로','멀다', '없다']

3. 빈도수 카운트
- 빈도수 카운트는 한 문장에 같은 키워드가 여러번 반복되어도 1회만 카운트
  - 라벨 간 키워드 수 불균형으로 인한 형평성 문제 해결을 위해

        ○ 키워드별 라벨링 코드
        for i in tqdm(range(len(review))):
            review = my_tokenizer(review[i])
            for j in review:
                if j in address:
                    total_hotel.loc[i,'address'] = 1
                    break
                else:
                    continue
                    
![스크린샷_20221210_035549](https://user-images.githubusercontent.com/113493695/206837290-9e64516c-e670-4dfd-94c5-5e640130f313.png)

## Issue
1. 각 사이트간 호텔명 & 주소 불일치
- 각 사이트 마다 등록된 호텔 이름이 달라, 데이터 통합시 다른 호텔로 인식되는 문제 발생

![스크린샷_20221210_035909](https://user-images.githubusercontent.com/113493695/206836767-b6ace185-41cc-4d23-b3da-f6051e0b451e.png)
- 각 호텔의 주소를 추가로 가지고 옴

![스크린샷_20221210_040024](https://user-images.githubusercontent.com/113493695/206836531-11684100-c313-4ef8-82ba-86a55c794e0c.png)

2. 부정어 적용 리뷰 필터링 난항
- 크롤링시, 기준을 높게 잡아 모든 리뷰가 긍정리뷰라고 가정
- 한 리뷰안의 라벨이 긍정이고부정일때, 긍정과 부정을 나누는 것은 프로젝트의 목적과 부합하지 않다고 생각

3. N-gram 으로는 토픽모델링 어려움
- N-gram 사용시 정해놓은 라벨별로 정확하게 구분이 어려움

        ○ N-gram
        
        Topic 1: [('직원 친절하다', 2662.14), ('깨끗하다 직원', 932.96), ('공항 근처', 905.05), ('깔끔하다 친절하다', 542.43), ('직원 친절', 481.67), ('깔끔하다 직원', 412.25), ('깨끗하다 조식', 378.55)]​

        Topic 2: [('공항 가깝다', 2335.91), ('깨끗하다 친절하다', 1415.67), ('시설 깨끗하다', 1056.14), ('룸 컨디션', 719.42), ('넓다 깨끗하다', 647.12), ('깨끗하다 위치', 526.76), ('직원 친절하다', 476.97)]​

        Topic 3: [('조식 맛있다', 734.27), ('시설 깔끔하다', 535.28), ('시장 가깝다', 398.12), ('없다 아쉽다', 373.78), ('깨끗하다 뷰', 328.57), ('깨끗하다 공항', 325.03), ('침대 푹신하다', 317.3)]​

        Topic 4: [('오션 뷰', 1056.61), ('깨끗하다 조용하다', 668.41), ('깨끗하다 넓다', 580.01), ('바다 뷰', 539.31), ('깨끗하다 시설', 526.14), ('친절하다 깔끔하다', 449.91), ('조용하다 깨끗하다', 316.41)]​

        Topic 5: [('가격 대비', 2827.31), ('침구 깨끗하다', 1694.38), ('친절하다 깨끗하다', 1221.99), ('직원 친절하다', 739.62), ('저렴하다 가격', 536.66), ('위치 시설', 475.68), ('가격 저렴하다', 421.98)]
 
 - 빈도수 기반으로 높은 키워드만 각 라벨별 리스트로 묶어 라벨별로  점수화하여 해결방안을 찾음

## Result
- 전체 호텔 리뷰의 Trend  
(label별 순위)   
1위 청결  
2위 시설  
3위 위치  
4위 서비스  
5위 가격

- 프로젝트 결과물을 통한 이점 : 원하는 호텔 내에서 키워드 관련 리뷰 검색

![스크린샷_20221210_041630](https://user-images.githubusercontent.com/113493695/206837709-88136a11-51f7-4071-a5e8-1b7ce13647eb.png)
 
- 고객의 니즈
  - “고객은 깨끗하고 뷰가 좋으며 관광지와 가깝고 직원이 친절하며 가성비가 좋은 호텔을 원한다."
  
- 프로젝트 결과물을 통한 이점 : 원하는 호텔 내에서 키워드 관련 리뷰 검색
  - 고객이 얻는 이점 : 원하는 특정 호텔에서 자신이 중요시하는 요소를  검색하여 확인 가능
  - 호텔 업체가 얻는 이점 : 호텔의 강점과 보완점, 고객의 니즈를 반영한  트렌드를 파악
